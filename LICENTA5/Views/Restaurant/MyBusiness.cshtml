@model IEnumerable<Reservation>

@inject UserManager<ApplicationUser> userManager



<div class="container mt-5">
    <div class="row">
        <div class="col-md-8">
            <div class="d-flex justify-content-between align-items-center activity">

                <div style="padding-bottom: 28px"><span class="activity-done" style="color:white">Reservations at @ViewData["RestaurantName"] </span></div>

            </div>


            <div class="page-content page-container" id="page-content" style="margin:10px; padding:0">
                    <div class="row container d-flex justify-content-center">
                        <div class="col-sm-6">
                            <div class="b-b b-theme nav-active-theme">
                                <ul class="nav nav-tabs" id="myTab" role="tablist">
                                    <li class="nav-item"><a style="color:darkorange" class="nav-link " id="today-tab" asp-action="MyBusiness" asp-route-filterParameter="Today" role="tab" aria-controls="home" aria-selected="false">Today</a></li>
                                    <li class="nav-item"><a style="color:darkorange" class="nav-link" id="recent-tab"  asp-action="MyBusiness" asp-route-sortOrder="Recent" role="tab" aria-controls="profile" aria-selected="false">Most recent</a></li>
                                    <li class="nav-item"><a style="color:darkorange" class="nav-link" id="oldest-tab"  asp-action="MyBusiness" asp-route-sortOrder="Oldest" role="tab" aria-controls="contact" aria-selected="false">The oldest</a></li>
                                </ul>
                            </div>
                           
                        </div>
                    </div>
              
            </div>


            <div class="mt-3">
                <ul class="list list-inline">
                    @foreach (var reservation in Model)
                    {
                        <li class="d-flex justify-content-between">
                            <div class="d-flex flex-row align-items-center">
                                @if (ViewData["CurrentHour"].Equals(reservation.HourComing))
                                {
                                    <i class="fa-solid fa-circle-check"></i>
                                }
                                else
                                {
                                    <i class="fa-solid fa-circle fa-2x"></i>

                                }
                                <div class="ml-2 d-flex flex-row">
                                    @*<h6 class="m-3" style="font-size:20px">@reservation.UserId</h6>*@
                                    @if (userManager.FindByIdAsync(reservation.UserId).Result.firstName != null)
                                    {
                                        <h6 class="m-3" style="font-size:20px">@userManager.FindByIdAsync(reservation.UserId).Result.firstName @userManager.FindByIdAsync(reservation.UserId).Result.lastName</h6>

                                    }
                                    else
                                    {
                                        <h6 class="m-3" style="font-size:20px">@userManager.FindByIdAsync(reservation.UserId).Result.Email </h6>

                                    }
                                    <div class="d-flex flex-row mt-1 text-black-50 date-time" style="font-size:20px">
                                        <div class="m-3"><i class="fa-solid fa-calendar-days"></i><span class="ml-2">@reservation.Date.ToShortDateString()</span></div>
                                        <div class="m-3"><i class="fa-solid fa-clock"></i><span class="ml-2">@reservation.HourComing:00</span></div>
                                        <div class="m-3"><i class="fa-solid fa-person"></i><span class="ml-2">@reservation.NrPers</span></div>
                                    </div>
                                </div>
                            </div>

                        </li>
                    }


                </ul>
            </div>
        </div>
        <div class="col-md-4">
           
            <div style="color:white" class="widget recent">
                <h5  class="widget-title">@ViewData["RestaurantName"] details</h5>
                <p style="color:white">You can modify the data by clicking the Edit button</p>
                <ul class="posts-list">
                    <li>
                        
                        <div class="widget-content" style="color:white">
                            <a>Capacity</a>
                            <span>@ViewData["RestaurantCapacity"]</span>
                        </div>
                        <div class="clearfix"></div>
                    </li>
                    <li>
                        <div class="widget-content" style="color:white">
                            <a>Program</a>
                            <span>@ViewData["RestaurantOpen"] - @ViewData["RestaurantClose"]</span>
                        </div>
                        <div class="clearfix"></div>
                    </li>

                    <li>
                        <div class="widget-content" style="color:white">
                            <a>Description</a>
                            <span>@ViewData["RestaurantDesc"] </span>
                        </div>
                        <div class="clearfix"></div>
                    </li>
                    <li>
                        <a class="btn btn-common" asp-action="EditRestaurant" asp-controller="Home" asp-route-id="@ViewData["RestaurantID"]">Edit</a>
                    </li>
                   

                </ul>
                

            </div>



        </div>
        </div>
        </div>
    </div>
